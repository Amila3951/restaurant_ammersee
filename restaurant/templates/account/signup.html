{% extends 'base.html' %}
{% load static %}

{% block content %}
<form method="post" action="{% url 'account_signup' %}" class="signup-form"> 
  <h1>Sign Up</h1>
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Sign Up</button>
  <p>Already have an account? <a href="{% url 'account_login' %}">Log in</a></p>
</form>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script type="module" src="{% static 'js/email.mjs' %}" defer></script> 

<script type="module">
  import { sendEmail } from "{% static 'js/email.mjs' %}"; 

  document.querySelector('.signup-form').addEventListener('submit', function(event) {
    sendEmail(this, event); 
  });
</script>

<script type="text/javascript">
  (function(){
    emailjs.init("JtEjZpi5gTulnaLfS");
  })();
</script>
{% endblock %}